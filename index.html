<!DOCTYPE html>
<html>
  <head>
    <title>EpicEditor - An embeddable JavaScript Markdown editor</title>
    <style>
      body { background:#FEED79; font-family:helvetica,arial,sans-serif; }
      #wrapper { width:600px;margin-left: 400px;line-height:1.4em; }
      #example-1 { height:349px;border:1px solid #000; }
      #epiceditor { margin: 20px 0; }
      #try-it { padding:5px; font-size:14px; }
      h1 { border-bottom:2px solid #000; padding:0 0 15px 0; font-size:38px; position:relative; }
      h3,h4,h5,h6 { margin-bottom:0; }
      h3 { font-size:20px; }
      h4 { font-size:18px; }
      h5 { font-size:16px; }
      h6 { font-size:14px; padding:10px 0; border-top:1px solid #000; }
      h1 span { font-weight:normal; font-size:20px; background:#000; color:#fff; padding:0 5px; border-radius:3px; position:absolute; top:0; right:0; }
      pre { border:1px solid #000; overflow-x:auto; background:#000; }
      .offline-mode pre { padding:5px; background:#000; color:#fff; }
      p { font-size:13px; margin:5px 0; }
      li { font-size:13px; margin:10px 0; }
      a { text-decoration:underline; color:#000; }
      .example { font-weight:bold; font-size:12px; }
      #toc {
        float: left;
        width: 360px;
        padding: 20px;
        position: fixed;
      }
      #toc ul {
        list-style-type: none;
        padding: 0;
      }
      #toc li {
        margin: 5px;
      }
      #toc li.toc-h3 {
        margin-left: 10px;
      }
    </style>
    <link rel="stylesheet" href="docs/prettify.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
  </head>
  <body>
    <div id="wrapper">
      
      
      <h1><img src="https://github.com/johnmdonahue/EpicEditor/raw/readme-build/images/epiceditor-logo.png" alt=""></h1>
<p>EpicEditor is an embeddable JavaScript <a href="http://daringfireball.net/projects/markdown/">Markdown</a> editor with some Markdown enhancements such as automatic link creation and code fencing a la <a href="">Github Flavored Markdown</a>. EpicEditor allows for all kinds of customization. For simple drop-in-and-go support see the quick start below, otherwise checkout the full API.

</p>
<h2>Why</h2>
<p>WYSIWYGs suck and they suck hard. Markdown is quickly becoming the replacement. <a href="http://github.com">GitHub</a>, <a href="http://stackoverflow.com">Stackoverflow</a>, and even blogging apps like <a href="http://posterous.com">Posterous</a> support Markdown. EpicEditor allows you to create a Markdown editor with a preview, fullscreen editing, full CSS theming, and offline support with one simple call:

</p>
<pre><code class="lang-javascript">var editor = new EpicEditor().load();</code></pre>
<h2>Quick Start</h2>
<p>EpicEditor is easy to implement. Add the script and assets to your page, provide a target container and call <code>load()</code>.

</p>
<h3>Step 1: Download <em>or</em> clone &amp; build from source</h3>
<pre><code class="lang-bash">$ git clone git@github.com:OscarGodson/EpicEditor</code></pre>
<h3>Step 2: Position the target container and load the script</h3>
<pre><code class="lang-html">&lt;div id=&quot;epiceditor&quot;&gt;&lt;/div&gt;
&lt;script src=&quot;epiceditor.min.js&quot;&gt;&lt;/script&gt;</code></pre>
<h3>Step 3: Init EpicEditor</h3>
<pre><code class="lang-javascript">var editor = new EpicEditor().load();</code></pre>
<h2>API</h2>
<h3>EpicEditor([<em>options</em>])</h3>
<p>The <code>EpicEditor</code> constructor creates a new editor instance. Customize the instance by passing the <code>options</code> parameter. The example below uses all options and their defaults:

</p>
<pre><code class="lang-javascript">var opts = {
  container: &#39;epiceditor&#39;,
  basePath: &#39;epiceditor&#39;,
  localStorageName: &#39;epiceditor&#39;,
  file: {
    name: &#39;epiceditor&#39;,
    defaultContent: &#39;&#39;
  },
  theme: {
    preview:&#39;/themes/preview/preview-dark.css&#39;,
    editor:&#39;/themes/editor/epic-dark.css&#39;
  },
  focusOnLoad: false,
  shortcut: {
    modifier: 18,
    fullscreen: 70,
    preview: 80,
    edit: 79
  }
}
var editor = new EpicEditor(opts);</code></pre>
<ul>
<li><code>container</code>: The ID of the target container element. By default it will look for an element with ID <code>epiceditor</code>.</li>
<li><code>basePath</code>: The base path of the directory containing the <code>/themes</code>, <code>/images</code>, etc. It&#39;s <code>epiceditor</code> by default. <em>Don&#39;t add a trailing slash!</em></li>
<li><code>localStorageName</code>: The name to use for the localStorage object, set to <code>epiceditor</code> by default.</li>
<li><code>file</code><ul>
<li><code>name</code>: If no file exists with this name a new one will be made, otherwise the existing will be opened.</li>
<li><code>defaultContent</code>: The content to show if no content exists for that file.</li>
</ul>
</li>
<li><code>theme</code><ul>
<li><code>editor</code>: The theme for the editor which is a textarea inside of an iframe.</li>
<li><code>preview</code>: The theme for the previewer which is a div of content inside of an iframe.</li>
</ul>
</li>
<li><code>focusOnLoad</code>: Will focus on the editor on load. It&#39;s <code>false</code> by default.</li>
<li><code>shortcut</code><ul>
<li><code>modifier</code>: The modifying key for shortcuts. It&#39;s <code>18</code> (the <code>alt</code> key) by default, to reduce default browser shortcut conflicts.</li>
<li><code>fullscreen</code>: The fullscreen shortcut key. It&#39;s <code>70</code> (<code>f</code> key) by default.</li>
<li><code>preview</code>: The preview shortcut key. It&#39;s <code>80</code> (<code>p</code> key) by default.</li>
<li><code>edit</code>: The edit mode shortcut key. It&#39;s <code>79</code> (<code>o</code> key) by default.</li>
</ul>
</li>
</ul>
<h3>load([<em>callback</em>])</h3>
<p>Loads the editor by inserting it into the DOM by creating an <code>iframe</code>. Will trigger the <code>load</code> event, or you can provide a callback.

</p>
<pre><code class="lang-javascript">editor.load(function () { console.log(&quot;Editor loaded.&quot;) });</code></pre>
<h3>unload([<em>callback</em>])</h3>
<p>Unloads the editor by removing the <code>iframe</code>. Keeps any options and file contents so you can easily call <code>.load()</code> again. Will trigger the <code>unload</code> event, or you can provide a callback.

</p>
<pre><code class="lang-javascript">editor.unload(function () { console.log(&quot;Editor unloaded.&quot;) });</code></pre>
<h3>get(<em>element</em>)</h3>
<p>Grabs an editor element for easy DOM manipulation. See the Themes section below for more on the layout of EpicEditor elements.

</p>
<ul>
<li><code>&#39;container&#39;</code>: The container element where the editor is injected</li>
<li><code>&#39;wrapper&#39;</code>: The div containing both the editor and preview iframes</li>
<li><code>&#39;wrapperIframe&#39;</code>: The iframe containing the wrapper element</li>
<li><code>&#39;editor&#39;</code>: The document object of the editor iframe (e.g. <code>editor.getElement(&#39;editor&#39;).body</code>)</li>
<li><code>&#39;editorIframe&#39;</code>: The iframe containing the editor element.</li>
<li><code>&#39;previewerIframe&#39;</code>: The iframe containing the previewer element</li>
<li><code>&#39;previewer&#39;</code>: The document object of the previewer iframe (e.g. <code>editor.getElement(&#39;previewer&#39;).body</code>)</li>
</ul>
<pre><code class="lang-javascript">someBtn.onclick = function(){
  console.log(editor.get(&#39;editor&#39;).body.innerHTML); // Returns the editor&#39;s content
}</code></pre>
<h3>open(<em>filename</em>)</h3>
<p>Opens a file into the editor.

</p>
<pre><code class="lang-javascript">openFileBtn.onclick = function(){
  editor.open(&#39;example.md&#39;); // Opens &quot;example.md&quot; on click
}</code></pre>
<h3>importFile([<em>filename</em>],[<em>content</em>])</h3>
<p>Imports a string of content into a file. If the file already exists, it will be overwritten. Useful if you want to inject a bunch of content via AJAX. Will also run <code>.open()</code> after import automatically.

</p>
<p>Imports a string of content into a file. If the file already exists, it will be overwritten. Useful if you want to inject a bunch of content via AJAX. Will also run .open() after import automatically.

</p>
<pre><code class="lang-javascript">importFileBtn.onclick = function(){
  editor.importMarkdown(&#39;example.md&#39;, &quot;# Imported markdown\nFancy, huh?&quot;); //Imports a file when the user clicks this button
}</code></pre>
<h3>exportFile(<em>filename</em>,[<em>type</em>])</h3>
<p>Returns the raw content of the file by default, or given a type will return the content converted into that type. If you leave both parameters null it will return the current document&#39;s raw content.

</p>
<pre><code class="lang-javascript">syncWithServerBtn.onclick = function(){
  var theContent = editor.exportFile();
  saveToServerAjaxCall(&#39;/save&#39;, {data:theContent}, function () {
    console.log(&#39;Data was saved to the database.&#39;);
  });
}</code></pre>
<h3>rename(<em>oldName</em>, <em>newName</em>)</h3>
<p>Renames a file.

</p>
<pre><code class="lang-javascript">renameFileBtn.onclick = function(){
  var newName = prompt(&#39;What do you want to rename this file to?&#39;);
  editor.rename(&#39;old-filename.md&#39;, newName); //Prompts a user and renames a file on button click
}</code></pre>
<h3>save()</h3>
<p>Manually saves a file. EpicEditor will save on keyup by default but if you are inserting content via ajax for example, this is useful.

</p>
<pre><code class="lang-javascript">saveFileBtn.onclick = function(){
  editor.save();
}</code></pre>
<h3>remove(<em>name</em>)</h3>
<p>Deletes a file.

</p>
<pre><code class="lang-javascript">removeFileBtn.onclick = function(){
  editor.remove(&#39;example.md&#39;);
}</code></pre>
<h3>on(<em>event</em>, <em>handler</em>)</h3>
<p>Sets up an event handler (callback) for a specified event. For all event types, see the Events section below.

</p>
<pre><code class="lang-javascript">editor.on(&#39;unload&#39;,function(){
  console.log(&#39;Editor was removed&#39;);
});</code></pre>
<h3>emit(<em>event</em>)</h3>
<p>Fires an event programatically. Similar to jQuery&#39;s <code>.trigger()</code>

</p>
<pre><code class="lang-javascript">editor.emit(&#39;unload&#39;); // Triggers the handler provided in the &quot;on&quot; method above</code></pre>
<h3>removeListener(<em>event</em>, [<em>handler</em>])</h3>
<p>Allows you to remove all listeners for an event, or just the specified one.

</p>
<pre><code class="lang-javascript">editor.removeListener(&#39;unload&#39;); //The handler above would no longer fire</code></pre>
<h3>preview()</h3>
<p>Puts the editor into preview mode.

</p>
<pre><code class="lang-javascript">previewBtn.onclick = function(){
  editor.preview();
}</code></pre>
<h3>edit()</h3>
<p>Puts the editor into edit mode.

</p>
<pre><code class="lang-javascript">editBtn.onclick = function () {
  editor.edit();
}</code></pre>
<h2>Events</h2>
<p><strong>load</strong> - Fires when the editor is loaded via <code>.load()</code>.

</p>
<p><strong>unload</strong> - Fires when the editor is unloaded via <code>.unload()</code>.

</p>
<p><strong>preview</strong> - Fires when the user clicks the preview button, or when <code>.preview()</code> is called.

</p>
<p><strong>edit</strong> - Fires when the user clicks the edit button, or when <code>.edit()</code> is called.

</p>
<p><strong>save</strong> - Fires when the file is saved automatically by EpicEditor, or when <code>.save()</code> is called.

</p>
<p><strong>open</strong> - Fires when the file is opened on load automatically by EpicEditor, or when <code>.open()</code> is called.

</p>
<h2>Themes</h2>
<p>TODO: This needs to be updated with the 3 new frame layout --&gt;

</p>
<p>Theming involves two parts; each are optional. There is an <code>editor</code> and <code>preview</code> theme for each instance of an editor and these themes reside in <code>/themes/editor</code> and <code>/themes/preview</code>. The editor involves just a <code>textarea</code> and the <code>#utilbar</code> (the area containing the preview/edit and fullscreen buttons). The preview is just a <code>div</code> with the generated HTML inside. All HTML for each editor is in an <code>iframe</code> so there is no need to worry about breaking the page you&#39;re embedding on with similar class names or style conflicts.

</p>
<p>The HTML of a generated editor (excluding contents) looks like this:

</p>
<pre><code class="lang-html">&lt;div id=&quot;container&quot;&gt;
  &lt;iframe id=&quot;epiceditor-instance-id&quot;&gt;
    &lt;html&gt;
      &lt;head&gt;
        &lt;link type=&quot;text/css&quot; id=&quot;&quot; rel=&quot;stylesheet&quot; href=&quot;epiceditor/themes/base/epiceditor.css&quot; media=&quot;screen&quot;&gt;
      &lt;/head&gt;
      &lt;body&gt;
        &lt;div id=&quot;epiceditor-wrapper&quot;&gt;
          &lt;iframe id=&quot;epiceditor-editor-frame&quot;&gt;
            #document
            &lt;html&gt;
              &lt;head&gt;
                &lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=&quot;epiceditor/themes/editor/epic-dark.css&quot; media=&quot;screen&quot;&gt;
              &lt;/head&gt;
              &lt;body contenteditable=&quot;true&quot;&gt;
                &lt;!-- markdown content --&gt;
              &lt;/body&gt;
            &lt;/html&gt;
          &lt;/iframe&gt;
          &lt;iframe id=&quot;epiceditor-previewer-frame&quot;&gt;
            #document
            &lt;html&gt;
              &lt;head&gt;
                &lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=&quot;epiceditor/themes/preview/github.css&quot; media=&quot;screen&quot;&gt;
              &lt;/head&gt;
              &lt;body&gt;
                &lt;div class=&quot;epiceditor-preview&quot;&gt;
                  &lt;!-- rendered html --&gt;
                &lt;/div&gt;
              &lt;/body&gt;
            &lt;/html&gt;
          &lt;/iframe&gt;
          &lt;div class=&quot;epiceditor-utilbar&quot;&gt;
            &lt;img width=&quot;16&quot; src=&quot;epiceditor/images/preview.png&quot; class=&quot;epiceditor-toggle-btn&quot;&gt;
            &lt;img width=&quot;16&quot; src=&quot;epiceditor/images/fullscreen.png&quot; class=&quot;epiceditor-fullscreen-btn&quot;&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/body&gt;
    &lt;/html&gt;
  &lt;/iframe&gt;
&lt;/div&gt;</code></pre>
<h2>Contributing</h2>
<p>Contributions are greatly encouraged and appreciated. For more on ways to contribute please check the wiki: <a href="https://github.com/OscarGodson/EpicEditor/wiki/Contributing">Contributing Guide</a>.

</p>
<h2>Credits</h2>
<!-- @TODO: Update links to GFM, Marked etc -->

<p><a href="http://twitter.com/oscargodson">Oscar Godson</a> (me!), created EpicEditor with help from <a href="http://twitter.com/adam_bickford">Adam Bickford</a>. With many thanks to John Fraser (<em>site is no longer up</em>) for his <a href="https://github.com/coreyti/showdown">Showdown.js</a> script and <a href="http://daringfireball.net/">John Gruber</a> for <a href="http://daringfireball.net/projects/markdown/">Markdown</a>. Also, <a href="http://blog.izs.me">Isaac Z. Schlueter</a> for his port of <a href="https://github.com/isaacs/github-flavored-markdown">GitHub Flavored Markdown</a> which I <a href="https://github.com/oscargodson/github-flavored-markdown">forked</a>.</p>

<a href="https://github.com/OscarGodson/EpicEditor"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://a248.e.akamai.net/assets.github.com/img/7afbc8b248c68eb468279e8c17986ad46549fb71/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub"></a>

<script src="docs/prettify.js"></script>
<script src="epiceditor/js/epiceditor.js"></script>
<script>

// Inject example-1, epiceditor, tryit, toc
$(function () {
  $('#wrapper').before('<div id="toc"><h4>EpicEditor</h4><ul id="toc-list"></ul></div>');
  $($('h1')[0]).append('<span>beta 0.1.0</span>');
  $($('h2')[1]).before('<button id="try-it">Try it!</button><div id="epiceditor"></div>');
  $($('h2')[0]).before('<div id="example-1"></div>');
  $($('h1')[0]).after('<h2>An Embeddable JavaScript Markdown Editor</h2>');
  
  var opts = {
      container: 'example-1'
    , file:{
        defaultContent:"#EpicEditor\nThis is some default content. Go ahead, _change me_. "
      }
      , focusOnLoad:true
      }
    , editor = new EpicEditor(opts).load()
    , example = new EpicEditor()
    , tryItStatus = false
    , tryItBtn = document.getElementById('try-it');

  tryItBtn.onclick = function(){
    if(!tryItStatus){
      tryItStatus = true;
      tryItBtn.innerHTML = 'Undo';
      example.load();
    }
    else{
      tryItStatus = false;
      tryItBtn.innerHTML = 'Try it again';
      example.unload();
    }
  }
  
  $('pre').addClass('prettyprint')
  prettyPrint()
  
  $("h2, h3").each(function (idx, val) {
    var h = $(this)
      , title = h.text()
      , link = title.toLowerCase().split(' ').join('-');
    
    if (idx === 0) return
    
    h.attr("id", link);
    $("#toc-list").append('<li class="toc-' + this.nodeName.toLowerCase()+ '"><a id="" href="#' + link + '">' + title + '</a></li>');
  });
})

</script>
</body>
</html>