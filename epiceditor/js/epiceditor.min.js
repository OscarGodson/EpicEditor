/**
 * EpicEditor - An Embeddable JavaScript Markdown Editor (https://github.com/OscarGodson/EpicEditor)
 * Copyright (c) 2011-2012, Oscar Godson. (MIT Licensed)
 *//**
 * marked - A markdown parser (https://github.com/chjj/marked)
 * Copyright (c) 2011-2012, Christopher Jeffrey. (MIT Licensed)
 */((function(){function l(){var a="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+";return a}function m(a){return a=a.source,function b(c,d){return c?(a=a.replace(c,d.source||d),b):new RegExp(a)}}function n(){}var a={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:n,hr:/^( *[\-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,lheading:/^([^\n]+)\n *(=|-){3,} *\n*/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)([*+-]|\d+\.) [^\0]+?(?:\n{2,}(?! )(?!\1bullet)\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *([^\s]+)(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,paragraph:/^([^\n]+\n?(?!body))+\n*/,text:/^[^\n]+/};a.list=m(a.list)("bullet",/(?:[*+-](?!(?: *[-*]){2,})|\d+\.)/)(),a.html=m(a.html)("comment",/<!--[^\0]*?-->/)("closed",/<(tag)[^\0]+?<\/\1>/)("closing",/<tag(?!:\/|@)\b(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,l())(),a.paragraph=function(){var b=a.paragraph.source,c=[];return function d(b){return b=a[b]?a[b].source:b,c.push(b.replace(/(^|[^\[])\^/g,"$1")),d}("hr")("heading")("lheading")("blockquote")("<"+l())("def"),new RegExp(b.replace("body",c.join("|")))}(),a.normal={fences:a.fences,paragraph:a.paragraph},a.gfm={fences:/^ *``` *(\w+)? *\n([^\0]+?)\s*``` *(?:\n+|$)/,paragraph:/^/},a.gfm.paragraph=m(a.paragraph)("(?!","(?!"+a.gfm.fences.source.replace(/(^|[^\[])\^/g,"$1")+"|")(),a.lexer=function(b){var c=[];return c.links={},b=b.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),a.token(b,c,!0)},a.token=function(b,c,d){var b=b.replace(/^ +$/gm,""),e,f,g,h,i,j,k;while(b){if(g=a.newline.exec(b))b=b.substring(g[0].length),g[0].length>1&&c.push({type:"space"});if(g=a.code.exec(b)){b=b.substring(g[0].length),g=g[0].replace(/^ {4}/gm,""),c.push({type:"code",text:p.pedantic?g:g.replace(/\n+$/,"")});continue}if(g=a.fences.exec(b)){b=b.substring(g[0].length),c.push({type:"code",lang:g[1],text:g[2]});continue}if(g=a.heading.exec(b)){b=b.substring(g[0].length),c.push({type:"heading",depth:g[1].length,text:g[2]});continue}if(g=a.lheading.exec(b)){b=b.substring(g[0].length),c.push({type:"heading",depth:g[2]==="="?1:2,text:g[1]});continue}if(g=a.hr.exec(b)){b=b.substring(g[0].length),c.push({type:"hr"});continue}if(g=a.blockquote.exec(b)){b=b.substring(g[0].length),c.push({type:"blockquote_start"}),g=g[0].replace(/^ *> ?/gm,""),a.token(g,c,d),c.push({type:"blockquote_end"});continue}if(g=a.list.exec(b)){b=b.substring(g[0].length),c.push({type:"list_start",ordered:isFinite(g[2])}),g=g[0].match(/^( *)([*+-]|\d+\.) [^\n]*(?:\n(?!\1(?:[*+-]|\d+\.) )[^\n]*)*/gm),e=!1,k=g.length,j=0;for(;j<k;j++)h=g[j],i=h.length,h=h.replace(/^ *([*+-]|\d+\.) +/,""),~h.indexOf("\n ")&&(i-=h.length,h=p.pedantic?h.replace(/^ {1,4}/gm,""):h.replace(new RegExp("^ {1,"+i+"}","gm"),"")),f=e||/\n\n(?!\s*$)/.test(h),j!==k-1&&(e=h[h.length-1]==="\n",f||(f=e)),c.push({type:f?"loose_item_start":"list_item_start"}),a.token(h,c),c.push({type:"list_item_end"});c.push({type:"list_end"});continue}if(g=a.html.exec(b)){b=b.substring(g[0].length),c.push({type:"html",pre:g[1]==="pre",text:g[0]});continue}if(d&&(g=a.def.exec(b))){b=b.substring(g[0].length),c.links[g[1].toLowerCase()]={href:g[2],title:g[3]};continue}if(d&&(g=a.paragraph.exec(b))){b=b.substring(g[0].length),c.push({type:"paragraph",text:g[0]});continue}if(g=a.text.exec(b)){b=b.substring(g[0].length),c.push({type:"text",text:g[0]});continue}}return c};var b={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:n,tag:/^<!--[^\0]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([^\0]+?)__(?!_)|^\*\*([^\0]+?)\*\*(?!\*)/,em:/^\b_((?:__|[^\0])+?)_\b|^\*((?:\*\*|[^\0])+?)\*(?!\*)/,code:/^(`+)([^\0]*?[^`])\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,text:/^[^\0]+?(?=[\\<!\[_*`]| {2,}\n|$)/};b._linkInside=/(?:\[[^\]]*\]|[^\]]|\](?=[^\[]*\]))*/,b._linkHref=/\s*<?([^\s]*?)>?(?:\s+['"]([^\0]*?)['"])?\s*/,b.link=m(b.link)("inside",b._linkInside)("href",b._linkHref)(),b.reflink=m(b.reflink)("inside",b._linkInside)(),b.normal={url:b.url,strong:b.strong,em:b.em,text:b.text},b.pedantic={strong:/^__(?=\S)([^\0]*?\S)__(?!_)|^\*\*(?=\S)([^\0]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([^\0]*?\S)_(?!_)|^\*(?=\S)([^\0]*?\S)\*(?!\*)/},b.gfm={url:/^(https?:\/\/[^\s]+[^.,:;"')\]\s])/,text:/^[^\0]+?(?=[\\<!\[_*`]|https?:\/\/| {2,}\n|$)/},b.lexer=function(a){var e="",f=d.links,g,h,i,l;while(a){if(l=b.escape.exec(a)){a=a.substring(l[0].length),e+=l[1];continue}if(l=b.autolink.exec(a)){a=a.substring(l[0].length),l[2]==="@"?(h=l[1][6]===":"?k(l[1].substring(7)):k(l[1]),i=k("mailto:")+h):(h=j(l[1]),i=h),e+='<a href="'+i+'">'+h+"</a>";continue}if(l=b.url.exec(a)){a=a.substring(l[0].length),h=j(l[1]),i=h,e+='<a href="'+i+'">'+h+"</a>";continue}if(l=b.tag.exec(a)){a=a.substring(l[0].length),e+=p.sanitize?j(l[0]):l[0];continue}if(l=b.link.exec(a)){a=a.substring(l[0].length),e+=c(l,{href:l[2],title:l[3]});continue}if((l=b.reflink.exec(a))||(l=b.nolink.exec(a))){a=a.substring(l[0].length),g=(l[2]||l[1]).replace(/\s+/g," "),g=f[g.toLowerCase()];if(!g||!g.href){e+=l[0][0],a=l[0].substring(1)+a;continue}e+=c(l,g);continue}if(l=b.strong.exec(a)){a=a.substring(l[0].length),e+="<strong>"+b.lexer(l[2]||l[1])+"</strong>";continue}if(l=b.em.exec(a)){a=a.substring(l[0].length),e+="<em>"+b.lexer(l[2]||l[1])+"</em>";continue}if(l=b.code.exec(a)){a=a.substring(l[0].length),e+="<code>"+j(l[2],!0)+"</code>";continue}if(l=b.br.exec(a)){a=a.substring(l[0].length),e+="<br>";continue}if(l=b.text.exec(a)){a=a.substring(l[0].length),e+=j(l[0]);continue}}return e};var c=function(a,c){return a[0][0]!=="!"?'<a href="'+j(c.href)+'"'+(c.title?' title="'+j(c.title)+'"':"")+">"+b.lexer(a[1])+"</a>":'<img src="'+j(c.href)+'" alt="'+j(a[1])+'"'+(c.title?' title="'+j(c.title)+'"':"")+">"},d,e,f=function(){return e=d.pop()},g=function(){switch(e.type){case"space":return"";case"hr":return"<hr>\n";case"heading":return"<h"+e.depth+">"+b.lexer(e.text)+"</h"+e.depth+">\n";case"code":return"<pre><code"+(e.lang?' class="'+e.lang+'"':"")+">"+(e.escaped?e.text:j(e.text,!0))+"</code></pre>\n";case"blockquote_start":var a="";while(f().type!=="blockquote_end")a+=g();return"<blockquote>\n"+a+"</blockquote>\n";case"list_start":var c=e.ordered?"ol":"ul",a="";while(f().type!=="list_end")a+=g();return"<"+c+">\n"+a+"</"+c+">\n";case"list_item_start":var a="";while(f().type!=="list_item_end")a+=e.type==="text"?h():g();return"<li>"+a+"</li>\n";case"loose_item_start":var a="";while(f().type!=="list_item_end")a+=g();return"<li>"+a+"</li>\n";case"html":return p.sanitize?b.lexer(e.text):!e.pre&&!p.pedantic?b.lexer(e.text):e.text;case"paragraph":return"<p>"+b.lexer(e.text)+"</p>\n";case"text":return"<p>"+h()+"</p>\n"}},h=function(){var a=e.text,c;while((c=d[d.length-1])&&c.type==="text")a+="\n"+f().text;return b.lexer(a)},i=function(a){d=a.reverse();var b="";while(f())b+=g();return d=null,e=null,b},j=function(a,b){return a.replace(b?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},k=function(a){var b="",c=a.length,d=0,e;for(;d<c;d++)e=a.charCodeAt(d),Math.random()>.5&&(e="x"+e.toString(16)),b+="&#"+e+";";return b};n.exec=n;var o=function(b,c){return r(c),i(a.lexer(b))},p,q,r=function(c){c||(c=q);if(p===c)return;p=c,p.gfm?(a.fences=a.gfm.fences,a.paragraph=a.gfm.paragraph,b.text=b.gfm.text,b.url=b.gfm.url):(a.fences=a.normal.fences,a.paragraph=a.normal.paragraph,b.text=b.normal.text,b.url=b.normal.url),p.pedantic?(b.em=b.pedantic.em,b.strong=b.pedantic.strong):(b.em=b.normal.em,b.strong=b.normal.strong)};o.options=o.setOptions=function(a){q=a,r(a)},o.options({gfm:!0,pedantic:!1,sanitize:!1}),o.parser=function(a,b){return r(b),i(a)},o.lexer=function(b,c){return r(c),a.lexer(b)},o.parse=o,typeof module!="undefined"?module.exports=o:this.marked=o})).call(this),function(a,b){function c(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}function d(a,b){for(var c in b)b.hasOwnProperty(c)&&(a.style[c]=b[c])}function e(b,c){var d=b,e=null;return a.getComputedStyle?e=document.defaultView.getComputedStyle(d,null).getPropertyValue(c):d.currentStyle&&(e=d.currentStyle[c]),e}function f(a){var b=parseInt(e(a,"border-left-width"),10)+parseInt(e(a,"border-right-width"),10),c=parseInt(e(a,"padding-left"),10)+parseInt(e(a,"padding-right"),10),d=a.offsetWidth,f;return isNaN(b)&&(b=0),f=b+c+d,f}function g(a){var b=parseInt(e(a,"border-top-width"),10)+parseInt(e(a,"border-bottom-width"),10),c=parseInt(e(a,"padding-top"),10)+parseInt(e(a,"padding-bottom"),10),d=a.offsetHeight,f;return isNaN(b)&&(b=0),f=b+c+d,f}function h(a,b,d){var e=b.getElementsByTagName("head")[0],f=b.createElement("link");d=d||"",c(f,{type:"text/css",id:d,rel:"stylesheet",href:a+"?"+(new Date).getTime(),name:a,media:"screen"}),e.appendChild(f)}function i(a,b,c){a.className=a.className.replace(b,c)}function j(){var a=-1,b,c;return navigator.appName==="Microsoft Internet Explorer"&&(b=navigator.userAgent,c=/MSIE ([0-9]{1,}[\.0-9]{0,})/,c.exec(b)!=null&&(a=parseFloat(RegExp.$1))),a}function k(a){var b={};return a&&b.toString.call(a)==="[object Function]"}function l(){var a=arguments[0]||{},c=1,d=arguments.length,e=!1,f,g,h,i;typeof a=="boolean"&&(e=a,a=arguments[1]||{},c=2),typeof a!="object"&&!k(a)&&(a={}),d===c&&(a=this,--c);for(;c<d;c++)if((f=arguments[c])!=null)for(g in f)if(f.hasOwnProperty(g)){h=a[g],i=f[g];if(a===i)continue;e&&i&&typeof i=="object"&&!i.nodeType?a[g]=l(e,h||(i.length!=null?[]:{}),i):i!==b&&(a[g]=i)}return a}function m(a){var b=a||{},c={container:"epiceditor",basePath:"epiceditor",localStorageName:"epiceditor",file:{name:b.container||"epiceditor",defaultContent:"",autoSave:100},theme:{preview:"/themes/preview/github.css",editor:"/themes/editor/epic-dark.css"},focusOnLoad:!1,shortcut:{modifier:18,fullscreen:70,preview:80,edit:79}},d;return this.settings=l(!0,c,b),this.settings.id="epiceditor-"+Math.round(Math.random()*1e5),localStorage&&(localStorage[this.settings.localStorageName]?JSON.parse(localStorage[this.settings.localStorageName]).files[this.settings.file.name]?this.content=this.settings.file.defaultContent:JSON.parse(localStorage[this.settings.localStorageName]).files[this.settings.file.name]=this.settings.file.defaultContent:(d={files:{}},d.files[this.settings.file.name]=this.settings.file.defaultContent,d=JSON.stringify(d),localStorage[this.settings.localStorageName]=d)),this.events||(this.events={}),this.element=document.getElementById(this.settings.container),this}m.prototype.load=function(b){var c=this,i,k,l,m,n;b=b||function(){},c.eeState={fullscreen:!1,preview:!1,edit:!0},k='<div class="epiceditor-wrapper epiceditor-edit-mode"><div class="epiceditor-utilbar"><img width="16" src="'+this.settings.basePath+'/images/preview.png" class="epiceditor-toggle-btn"> '+'<img width="16" src="'+this.settings.basePath+'/images/fullscreen.png" class="epiceditor-fullscreen-btn">'+"</div>"+'<div class="epiceditor-editor">'+'<textarea class="epiceditor-textarea"></textarea>'+"</div>"+'<div class="epiceditor-preview"></div>'+"</div>",this.element.innerHTML='<iframe scrolling="no" frameborder="0" id= "'+c.settings.id+'"></iframe>',i=document.getElementById(c.settings.id),c.iframeElement=i,c.iframe=i.contentDocument||i.contentWindow.document,c.iframe.open(),c.iframe.write(k),l=f(this.element)-this.element.offsetWidth,m=g(this.element)-this.element.offsetHeight,i.style.width=this.element.offsetWidth-l+"px",i.style.height=this.element.offsetHeight-m+"px",n=c.iframe.body,n.style.padding="0",n.style.margin="0",h(c.settings.basePath+c.settings.theme.editor,c.iframe),c.iframe.getElementsByClassName("epiceditor-wrapper")[0].style.position="relative",this.editor=c.iframe.getElementsByClassName("epiceditor-textarea")[0],this.previewer=c.iframe.getElementsByClassName("epiceditor-preview")[0],c.iframe.body.style.height=this.element.offsetHeight+"px",this.editor.style.width="100%",this.editor.style.height=this.element.offsetHeight+"px",this.previewer.style.display="none",this.previewer.style.overflow="auto",this.previewer.style.padding="10px",this.previewer.style.width=this.element.offsetWidth-f(this.previewer)-l+"px",this.previewer.style.height=this.element.offsetHeight-g(this.previewer)-m+"px",j()>-1&&(this.previewer.style.height=parseInt(e(this.previewer,"height"),10)+2),h(c.settings.basePath+c.settings.theme.preview,c.iframe,"theme"),this.open(c.settings.file.name),this.settings.focusOnLoad&&this.editor.focus(),c.iframe.getElementsByClassName("epiceditor-toggle-btn")[0].addEventListener("click",function(){c.eeState.edit?c.preview():c.edit()});var o=c.iframe.getElementsByClassName("epiceditor-utilbar")[0],p=function(a,b,c){var f={},g;if(b==="save"){for(g in c)c.hasOwnProperty(g)&&(f[g]=e(a,g));d(a,c)}else b==="apply"&&d(a,c);return f},q={},r=function(b){var d=b.webkitRequestFullScreen?!0:!1;c.eeState.fullscreen=!0,c.eeState.edit=!0,c.eeState.preview=!0;var g=a.innerWidth,h=a.innerHeight,i=a.outerWidth,j=a.outerHeight;q.element=p(c.element,"save",{position:"fixed",top:"0",left:"0",width:"100%","z-index":"9999",zIndex:"9999",border:"none",background:e(c.editor,"background-color"),height:h+"px"}),q.iframeElement=p(c.iframeElement,"save",{width:g+"px",height:h+"px"}),q.editor=p(c.editor,"save",{width:i/2+"px",height:j+"px","float":"left",cssFloat:"left",styleFloat:"left",display:"block"}),q.previewer=p(c.previewer,"save",{width:i-f(c.editor)+"px",height:j+"px","float":"right",cssFloat:"right",styleFloat:"right",display:"block"}),o.style.visibility="hidden",d?b.webkitRequestFullScreen():document.body.style.overflow="hidden",c.preview(!0),c.editor.addEventListener("keyup",function(){c.preview(!0)})},s=function(a){var b=a.webkitRequestFullScreen?!0:!1;p(c.element,"apply",q.element),p(c.iframeElement,"apply",q.iframeElement),p(c.editor,"apply",q.editor),p(c.previewer,"apply",q.previewer),o.style.visibility="hidden",b||(document.body.style.overflow="auto")},t=document.getElementById(c.settings.id);document.body.webkitRequestFullScreen&&(c.iframe.getElementsByClassName("epiceditor-fullscreen-btn")[0].addEventListener("click",function(){if(e(c.previewer,"display")==="block")var a=c.previewer;r(t)}),t.addEventListener("webkitfullscreenchange",function(){document.webkitIsFullScreen||s(t)},!1));var u=c.iframe.getElementsByClassName("epiceditor-utilbar")[0];u.style.display="none";var v,w={y:-1,x:-1};this.iframe.addEventListener("mousemove",function(b){if(Math.abs(w.y-b.pageY)>=5||Math.abs(w.x-b.pageX)>=5)u.style.display="block",v&&clearTimeout(v),v=a.setTimeout(function(){u.style.display="none"},1e3);w={y:b.pageY,x:b.pageX}});if(c.settings.file.autoSave)var x=a.setInterval(function(){c.content=this.value,c.save(c.settings.file.name,this.value)},c.settings.file.autoSave);var y=!1,z=!1;return c.iframe.addEventListener("keyup",function(a){a.keyCode===c.settings.shortcut.modifier&&(y=!1),a.keyCode===17&&(z=!1)}),c.iframe.addEventListener("keydown",function(a){a.keyCode===c.settings.shortcut.modifier&&(y=!0),a.keyCode===17&&(z=!0),y===!0&&a.keyCode===c.settings.shortcut.preview&&!c.eeState.fullscreen&&(a.preventDefault(),c.preview()),y===!0&&a.keyCode===c.settings.shortcut.edit&&(a.preventDefault(),c.eeState.fullscreen||c.edit()),y===!0&&a.keyCode===c.settings.shortcut.fullscreen&&(a.preventDefault(),r(t)),a.keyCode===27&&c.eeState.fullscreen&&(document.body.webkitRequestFullScreen||s(t)),z===!0&&a.keyCode===83&&a.preventDefault()}),a.addEventListener("resize",function(){var b=f(c.element)-c.element.offsetWidth;i.style.width=c.element.offsetWidth-b+"px",c.eeState.fullscreen&&(d(c.previewer,{width:a.outerWidth-f(c.editor)+"px",height:a.outerHeight+"px"}),d(c.editor,{width:a.outerWidth/2+"px",height:a.outerHeight+"px"}),d(c.iframeElement,{width:a.innerWidth+"px",height:a.innerHeight+"px"}))}),c.iframe.close(),b.call(this),this.emit("load"),this},m.prototype.unload=function(b){var c=this,d=a.parent.document.getElementById(c.settings.id);return d.parentNode.removeChild(d),b=b||function(){},b.call(this),c.emit("unload"),c},m.prototype.preview=function(a,b){var c=this,d=c.settings.basePath+c.settings.theme.preview;return typeof a=="boolean"?(b=a,a=d):a=a||d,i(c.get("wrapper"),"epiceditor-edit-mode","epiceditor-preview-mode"),c.eeState.preview=!0,c.eeState.edit=!1,c.iframe.getElementById("theme")?c.iframe.getElementById("theme").name!==a&&(c.iframe.getElementById("theme").href=a):h(a,c.iframe,"theme"),this.previewer.innerHTML=this.exportHTML(),b||(this.editor.style.display="none",this.previewer.style.display="block"),c.emit("preview"),this},m.prototype.edit=function(){var a=this;return i(a.get("wrapper"),"epiceditor-preview-mode","epiceditor-edit-mode"),a.eeState.preview=!1,a.eeState.edit=!0,this.editor.style.display="block",this.previewer.style.display="none",a.emit("edit"),this},m.prototype.get=function(a){var b={document:this.iframe,body:this.iframe.body,editor:this.editor,previewer:this.previewer,wrapper:this.iframe.getElementsByClassName("epiceditor-wrapper")[0]};return b[a]?b[a]:null},m.prototype.open=function(a){var b=this,c;return a=a||b.settings.file.name,localStorage&&localStorage[b.settings.localStorageName]&&(c=JSON.parse(localStorage[b.settings.localStorageName]).files,c[a]?b.editor.value=c[a]:b.editor.value=this.settings.file.defaultContent,b.settings.file.name=a,this.previewer.innerHTML=this.exportHTML(),this.emit("open")),this},m.prototype.save=function(a,b){var c=this,d;return a=a||c.settings.file.name,b=b||this.editor.value,d=JSON.parse(localStorage[c.settings.localStorageName]),d.files[a]=b,localStorage[c.settings.localStorageName]=JSON.stringify(d),this.emit("save"),this},m.prototype.remove=function(a){var b=this,c;return a=a||b.settings.file.name,c=JSON.parse(localStorage[b.settings.localStorageName]),delete c.files[a],localStorage[b.settings.localStorageName]=JSON.stringify(c),this.emit("remove"),this},m.prototype.importMarkdown=function(a,b){var c=this;return b=b||"",c.open(a).get("editor").value=b,c.save().open(a),this},m.prototype.rename=function(a,b){var c=this,d=JSON.parse(localStorage[c.settings.localStorageName]);return d.files[b]=d.files[a],delete d.files[a],localStorage[c.settings.localStorageName]=JSON.stringify(d),c.open(b),this},m.prototype.exportHTML=function(){return marked(this.editor.value)},m.prototype.on=function(a,b){var c=this;return this.events[a]||(this.events[a]=[]),this.events[a].push(b),c},m.prototype.emit=function(a,b){function d(a){a.call(c.iframe,b)}var c=this;if(!this.events[a])return;return this.events[a].forEach(d),c},m.prototype.removeListener=function(a,b){var c=this;return b?this.events[a]?(this._events[a].splice(this._events[a].indexOf(b),1),c):c:(this.events[a]=[],c)},a.EpicEditor=m}(window);